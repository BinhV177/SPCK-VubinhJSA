<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªè h√†ng - Chic Boutique</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/cart.css">
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="brand">
                <img src="./assets/logo.png" alt="Chic Boutique Logo" class="logo-img">
                <span class="brand-name">Chic Boutique</span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Trang ch·ªß</a></li>
                <li><a href="products.html?type=women">N·ªØ</a></li>
                <li><a href="products.html?type=men">Nam</a></li>
                <li><a href="#">B·ªô s∆∞u t·∫≠p</a></li>
                <li><a href="#">Sale</a></li>
            </ul>
            <div class="nav-actions">
                <div class="nav-icons">
                    <a href="#" class="search-icon"><i class="fas fa-search"></i></a>
                    <a href="cart.html" class="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-badge">0</span>
                    </a>
                    <a href="profile.html" class="user-icon"><i class="fas fa-user"></i></a>
                </div>
                <div class="hamburger-menu">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                </div>
            </div>
        </nav>
    </header>

    <main style="margin-top:90px; min-height:60vh;">
        <h1 style="text-align:center; margin-bottom:20px;">Gi·ªè h√†ng c·ªßa b·∫°n</h1>
        <div class="cart-container">
            <div class="cart-content">
                <div class="cart-items">
                    <!-- Cart items will be dynamically added here -->
                </div>
                <div class="cart-summary">
                    <h2>T·ªïng ƒë∆°n h√†ng</h2>
                    <div class="summary-item">
                        <span>T·∫°m t√≠nh:</span>
                        <span class="subtotal">0ƒë</span>
                    </div>
                    <div class="summary-item">
                        <span>Ph√≠ v·∫≠n chuy·ªÉn:</span>
                        <span class="shipping">30.000ƒë</span>
                    </div>
                    <div class="summary-item total">
                        <span>T·ªïng c·ªông:</span>
                        <span class="total-amount">0ƒë</span>
                    </div>
                    <button class="checkout-btn" disabled>Thanh to√°n</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="brand">
                    <img src="./assets/logo.png" alt="Chic Boutique Logo" class="footer-logo">
                    <h3>Chic Boutique</h3>
                </div>
                <p>Th·ªùi trang cao c·∫•p cho phong c√°ch s·ªëng hi·ªán ƒë·∫°i</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h4>Th√¥ng Tin</h4>
                <ul>
                    <li><a href="#">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">C·ª≠a h√†ng</a></li>
                    <li><a href="#">Li√™n h·ªá</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Ch√≠nh S√°ch</h4>
                <ul>
                    <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
                    <li><a href="#">Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</a></li>
                    <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                    <li><a href="#">ƒêi·ªÅu kho·∫£n d·ªãch v·ª•</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>ƒêƒÉng K√Ω Nh·∫≠n Tin</h4>
                <p>Nh·∫≠n th√¥ng tin v·ªÅ ∆∞u ƒë√£i v√† b·ªô s∆∞u t·∫≠p m·ªõi</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Email c·ªßa b·∫°n">
                    <button type="submit">ƒêƒÉng k√Ω</button>
                </form>
            </div>
        </div>
        <div class="copyright">
            ¬© 2025 Chic Boutique. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.
        </div>
    </footer>

    <script type="module">
        import { cartManager } from './scripts/products.js';

        // Hi·ªÉn th·ªã gi·ªè h√†ng
        function displayCart() {
            const cartItems = document.querySelector('.cart-items');
            const cart = cartManager.getCart();
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="empty-cart">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</p>';
                document.querySelector('.checkout-btn').disabled = true;
                return;
            }

            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.name}">
                    <div class="item-details">
                        <h3>${item.name}</h3>
                        <p class="item-price">${item.price.toLocaleString('vi-VN')}ƒë</p>
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-btn minus">-</button>
                        <input type="number" value="${item.quantity}" min="1" max="10" class="quantity-input">
                        <button class="quantity-btn plus">+</button>
                    </div>
                    <div class="item-total">
                        ${(item.price * item.quantity).toLocaleString('vi-VN')}ƒë
                    </div>
                    <button class="remove-item"><i class="fas fa-trash"></i></button>
                </div>
            `).join('');

            updateSummary();
            document.querySelector('.checkout-btn').disabled = false;
        }

        // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn
        function updateSummary() {
            const subtotal = cartManager.getTotal();
            const shipping = 30000;
            const total = subtotal + shipping;

            document.querySelector('.subtotal').textContent = `${subtotal.toLocaleString('vi-VN')}ƒë`;
            document.querySelector('.total-amount').textContent = `${total.toLocaleString('vi-VN')}ƒë`;
        }

        // X·ª≠ l√Ω s·ª± ki·ªán tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng
        document.querySelector('.cart-items').addEventListener('click', (e) => {
            const item = e.target.closest('.cart-item');
            if (!item) return;

            const id = parseInt(item.dataset.id);
            const input = item.querySelector('.quantity-input');
            let quantity = parseInt(input.value);

            if (e.target.classList.contains('minus')) {
                if (quantity > 1) {
                    quantity--;
                    cartManager.updateQuantity(id, quantity);
                    displayCart();
                }
            } else if (e.target.classList.contains('plus')) {
                if (quantity < 10) {
                    quantity++;
                    cartManager.updateQuantity(id, quantity);
                    displayCart();
                }
            } else if (e.target.closest('.remove-item')) {
                cartManager.removeFromCart(id);
                displayCart();
            }
        });

        // X·ª≠ l√Ω input s·ªë l∆∞·ª£ng
        document.querySelector('.cart-items').addEventListener('change', (e) => {
            if (e.target.classList.contains('quantity-input')) {
                const item = e.target.closest('.cart-item');
                const id = parseInt(item.dataset.id);
                let quantity = parseInt(e.target.value);

                if (quantity < 1) quantity = 1;
                if (quantity > 10) quantity = 10;

                cartManager.updateQuantity(id, quantity);
                displayCart();
            }
        });

        // X·ª≠ l√Ω n√∫t thanh to√°n
        document.querySelector('.checkout-btn').addEventListener('click', (e) => {
            e.preventDefault();
            // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
            const success = document.createElement('div');
            success.className = 'checkout-success';
            success.textContent = 'üéâ Thanh to√°n th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng.';
            document.body.appendChild(success);
            setTimeout(() => {
                success.classList.add('show');
            }, 100);
            setTimeout(() => {
                success.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(success);
                }, 300);
            }, 2500);

            // X√≥a gi·ªè h√†ng
            cartManager.clearCart();
            displayCart();
            cartManager.updateCartBadge();
        });

        // Hi·ªÉn th·ªã gi·ªè h√†ng khi trang ƒë∆∞·ª£c t·∫£i
        displayCart();
        cartManager.updateCartBadge();
    </script>
</body>
</html>